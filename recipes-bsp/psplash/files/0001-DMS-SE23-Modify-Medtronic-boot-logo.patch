From 986abf559678e8dc2e927d3e771bbb19bc55a9f7 Mon Sep 17 00:00:00 2001
From: chris <chris.liu@advantech.com.tw>
Date: Mon, 23 Apr 2018 14:36:31 +0800
Subject: [PATCH] [DMS-SE23] Modify Medtronic boot logo

---
 psplash-config.h | 7 +++++--
 psplash.c        | 7 ++++++-
 2 files changed, 11 insertions(+), 3 deletions(-)
 mode change 100644 => 100755 psplash-config.h
 mode change 100644 => 100755 psplash.c

diff --git a/psplash-config.h b/psplash-config.h
old mode 100644
new mode 100755
index 82bb76d..582723a
--- a/psplash-config.h
+++ b/psplash-config.h
@@ -20,10 +20,10 @@
 #define _HAVE_PSPLASH_CONFIG_H
 
 /* Text to output on program start; if undefined, output nothing */
-#define PSPLASH_STARTUP_MSG ""
+//#define PSPLASH_STARTUP_MSG ""
 
 /* Bool indicating if the image is fullscreen, as opposed to split screen */
-#define PSPLASH_IMG_FULLSCREEN 0
+#define PSPLASH_IMG_FULLSCREEN 1
 
 /* Position of the image split from top edge, numerator of fraction */
 #define PSPLASH_IMG_SPLIT_NUMERATOR 5
@@ -31,4 +31,7 @@
 /* Position of the image split from top edge, denominator of fraction */
 #define PSPLASH_IMG_SPLIT_DENOMINATOR 6
 
+/* Bool indicating draw progress bar */
+#define PSPLASH_IMG_PROGRESS_BAR 0
+
 #endif
diff --git a/psplash.c b/psplash.c
old mode 100644
new mode 100755
index 185f38e..6e1ef63
--- a/psplash.c
+++ b/psplash.c
@@ -76,7 +76,7 @@ psplash_draw_progress (PSplashFB *fb, int value)
   y      = SPLIT_LINE_POS(fb) + 4;
   width  = BAR_IMG_WIDTH - 8; 
   height = BAR_IMG_HEIGHT - 8;
-
+#if PSPLASH_IMG_PROGRESS_BAR	
   if (value > 0)
     {
       barwidth = (CLAMP(value,0,100) * width) / 100;
@@ -99,6 +99,7 @@ psplash_draw_progress (PSplashFB *fb, int value)
 
   DBG("value: %i, width: %i, barwidth :%i\n", value, 
 		width, barwidth);
+#endif	
 }
 
 static int 
@@ -115,7 +116,9 @@ parse_command (PSplashFB *fb, char *string, int length)
 
   if (!strcmp(command,"PROGRESS")) 
     {
+#if PSPLASH_IMG_PROGRESS_BAR			
       psplash_draw_progress (fb, atoi(strtok(NULL,"\0")));
+#endif	  
     } 
   else if (!strcmp(command,"MSG")) 
     {
@@ -286,6 +289,7 @@ main (int argc, char** argv)
 			 POKY_IMG_ROWSTRIDE,
 			 POKY_IMG_RLE_PIXEL_DATA);
 
+#if PSPLASH_IMG_PROGRESS_BAR			 
   /* Draw progress bar border */
   psplash_fb_draw_image (fb, 
 			 (fb->width  - BAR_IMG_WIDTH)/2, 
@@ -297,6 +301,7 @@ main (int argc, char** argv)
 			 BAR_IMG_RLE_PIXEL_DATA);
 
   psplash_draw_progress (fb, 0);
+#endif
 
 #ifdef PSPLASH_STARTUP_MSG
   psplash_draw_msg (fb, PSPLASH_STARTUP_MSG);
-- 
1.9.1

